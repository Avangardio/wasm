–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –°–µ–≥–æ–¥–Ω—è —è —Ö–æ—á—É –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ WASM —Å C++ –∏ —Ä–∞–∑–±–µ—Ä—É, –∫–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —ç—Ç–∏–º –≤—Å–µ–º –¥–µ–ª–æ–º —á–µ—Ä–µ–∑ JavaScript.
# –í–≤–µ–¥–µ–Ω–∏–µ
–í —ç—Ç–æ–º –≥–æ–¥—É —è –¥–ª—è –æ–±—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è, —Å–∫–æ—Ä–µ–µ, –Ω–∞—á–∞–ª –∏–∑—É—á–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ WASM, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –∏ –æ–±—Å—É–∂–¥–∞–µ–º–æ–π —Ç–µ–º–æ–π –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç. 

–ü–æ—á—Ç–∏ —Å—Ä–∞–∑—É —è —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º —Ä–∞–∑—Ä—ã–≤–æ–º –≤ —É—Ä–æ–≤–Ω—è—Ö —Ç—É—Ç–æ—Ä–∏–∞–ª–æ–≤ (–º–∞—Ç–µ—Ä–∏–∞–ª—ã –ª–∏–±–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã–µ –∏ –Ω–µ –∏–º–µ—é—Ç —Å–º—ã—Å–ª–∞, –ª–∏–±–æ –¥–ª—è —Å–æ–≤—Å–µ–º –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è) –∏ —Å–∫—É–¥–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π. 

–¢–æ –µ—Å—Ç—å, –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –Ω–æ–≤–∏—á–∫–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–æ, –∏ –ø–æ—ç—Ç–æ–º—É —è —Ä–µ—à–∏–ª —Å–æ–∑–¥–∞—Ç—å –≥–∞–π–¥, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ —Ç–µ–º—ã —Å –Ω—É–ª—è –∏ –¥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è. –í –Ω—ë–º —è –ø–æ—Å—Ç–∞—Ä–∞–ª—Å—è –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥—ã—Ä—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å–∞–º –≤–æ –≤—Ä–µ–º—è –∏–∑—É—á–µ–Ω–∏—è. 

–Ø —Å–æ–±—Ä–∞–ª –≤—Å–µ –º–æ–∏ –∑–Ω–∞–Ω–∏—è –∏ —Ö–æ—á—É –ø–µ—Ä–µ–¥–∞—Ç—å –∏–º –≤–∞–º, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ –≤–ª–∏—Ç—å—Å—è –≤ –¥–∞–Ω–Ω—É—é, –Ω–µ —Å–∞–º—É—é –ø—Ä–æ—Å—Ç—É—é, —Ç–µ–º—É.

# –ß—Ç–æ –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å
<ul>
    <li>–°–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏–º Emscripten, —á—Ç–æ–±—ã, –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º, –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à –°++ –∫–æ–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ WASM.</li>
    <li>–£–∑–Ω–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è TypeScript —Å WASM-—Ñ—É–Ω–∫—Ü–∏—è–º–∏.</li>
    <li>–†–∞–∑–±–µ—Ä–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –∏ —Ä–∞–∑–±–µ—Ä–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.</li>
    <li>–ó–∞–ø—É—Å—Ç–∏–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –Ω–∞–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ NodeJS.</li>
</ul>

# –° —á–µ–º –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å
<ul>
    <li>–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏–∑ –°–∏ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <a href="https://ru.wikipedia.org/wiki/Emscripten">Emscripten</a> - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä LLVM-–±–∞–π—Ç–∫–æ–¥–∞ –≤ –∫–æ–¥ JavaScript</li>.
    <li>–°–æ —Å—Ç–æ—Ä–æ–Ω—ã JavaScript –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TypeScript —Å Node.JS.</li>
    <li>–î–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –°++ –∫–æ–¥–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å IDE, —è –∏—Å–ø–æ–ª—å–∑—É—é CLion, –∏ –¥–æ–±–∞–≤–ª—é –≤ –Ω–µ–≥–æ .h —Ñ–∞–π–ª—ã –∏–∑ Emscripten –¥–ª—è —Ä–∞–±–æ—á–µ–≥–æ –ª–∏–Ω—Ç–µ—Ä–∞.</li>
</ul>

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Emscripten

–° —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –¥–µ–ª–∞ –æ–±—Å—Ç–æ—è—Ç –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ, —Å–ª–µ–¥—É–π—Ç–µ <a href="https://emscripten.org/docs/getting_started/downloads.html">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a> –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

# –ù–∞—á–∞–ª–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–∞—à–µ–π –°++ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞–º, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –Ω—É–∂–µ–Ω –°++ —Ñ–∞–π–ª —Å —Ñ—É–Ω–∫—Ü–∏–µ–π. (–ü—Ä–æ –±–∏–Ω–¥—ã –º—ã –µ—â–µ –Ω–µ –∑–Ω–∞–µ–º!)

–ù–∞—à –ø–µ—Ä–≤—ã–π –°++ –∫–æ–¥ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
```
#include <emscripten/bind.h>

#ifdef __cplusplus
#define EXTERN extern "C"
#else
#define EXTERN
#endif

EXTERN EMSCRIPTEN_KEEPALIVE
int add(int a, int b) {
    return a + b;
}
```
–†–∞–∑–±–µ—Ä–µ–º –µ–≥–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ:

```#include <emscripten/bind.h>``` - –∫–∞–∫ –∏–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫ –≤ JavaScript.

```
#ifdef __cplusplus
#define EXTERN extern "C"
#else
#define EXTERN
#endif
```
–í–∑—è–ª —Å —Å–∞–π—Ç–∞ –º–æ–∑–∏–ª–ª—ã, –¥–æ–≤–æ–ª—å–Ω–æ —É–¥–æ–±–Ω—ã–π –±–ª–æ–∫ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞.

```EXTERN EMSCRIPTEN_KEEPALIVE``` - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –∫—Ä–æ–º–µ main, –∏–Ω–∞—á–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–¥—É–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ - "–º–µ—Ä—Ç–≤—ã–π" –∫–æ–¥ –∏ –Ω–µ –≤–æ–∑—å–º–µ—Ç –µ–≥–æ –≤ –∏—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª.

```
int add(int a, int b) {
    return a + b;
}
```
–ü—Ä–æ—Å—Ç–µ–π—à–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞ –°–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç a, b –∏ –≤–æ–∑—Ä–∞—â–∞–µ—Ç –∏—Ö —Å—É–º–º—É –≤ –≤–∏–¥–µ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞.

–¢–µ–ø–µ—Ä—å –º—ã –¥–æ–ª–∂–Ω—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à –°++ –∫–æ–¥ –≤ WASM –∏ JavaScript –æ–±—ë—Ä—Ç–∫—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–Ω—ã–º:

```
emcc src/wasm/native.example.cpp -o build/native.example.js -s EXPORTED_FUNCTIONS='["_malloc", "_free"]' -s EXPORTED_RUNTIME_METHODS='["lengthBytesUTF8", "stringToUTF8", "setValue", "getValue", "UTF8ToString"]' -s MODULARIZE -s ENVIRONMENT='node' -Oz
```
–ü—Ä–æ EXPORTED_RUNTIME_METHODS –∏ EXPORTED_FUNCTIONS —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–µ–µ —á—É—Ç—å –ø–æ–∑–∂–µ, –Ω–æ –ø—É—Å—Ç—å –±—É–¥–µ—Ç —É–∂–µ —Å–µ–π—á–∞—Å.

–ù–∞ –≤—ã—Ö–æ–¥–µ –º—ã –ø–æ–ª—É—á–∞–µ–º –≤ –ø–∞–ø–∫–µ build —Ñ–∞–π–ª—ã native.example.js –∏ –±–∏–Ω–∞—Ä–Ω–∏–∫ native.example.wasm, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –Ω–∞—à–µ–º JavaScript –∫–æ–¥–µ.

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

```typescript
const WasmModule = require(path.join(__dirname, '..', 'build', 'native.example.js'));
const wasmFile = path.join(__dirname, '..', 'build', 'native.example.wasm');

const createModule = async () => {
    const wasmBinary = readFileSync(wasmFile);
    return WasmModule({
        wasmBinary
    });
};
```
–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –º–æ–¥—É–ª—å —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏–∑ —ç—Ç–æ–≥–æ WASM-—Ñ–∞–π–ª–∞ –∏ –µ–≥–æ –æ–±—ë—Ä—Ç–∫–∏.
```typescript
const a = 2;
const b = 5;

const result = module._add(a, b); // 7;
```
–û—á–µ–Ω—å –≤–∞–∂–Ω–æ! –ë–µ–∑ –±–∏–Ω–¥–æ–≤ –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –°++ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Å "_".

```add() -> _add()``` –ü—Ä–∏–º–µ—Ä —Ç–∞–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–π.

–í –æ–±—â–µ–º, –Ω–∞ —ç—Ç–æ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç—É—Ç–æ—Ä–∏–∞–ª–æ–≤ –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è, –æ—Å—Ç–∞–≤–ª—è—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ —Å –¥–Ω–æ–º –æ–≥—Ä–æ–º–Ω–æ–≥–æ –∞–π—Å–±–µ—Ä–≥–∞.
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å—Å—ã–ª–æ—á–Ω—ã–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º

–° –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –º—ã –±—É–¥–µ–º –æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏, —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç–∞.

–°–æ–∑–¥–∞–¥–∏–º —Å–ª–µ–¥—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é: 

```
EXTERN EMSCRIPTEN_KEEPALIVE
int sumArray(int array[], int length) {
    std::vector<int> vec(array, array + length);
    int sum = 0;
    for (int num : vec) {
        sum += num;
    }
    return sum;
}
```

–§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª –∏ –¥–ª–∏–Ω–Ω—É –º–∞—Å—Å–∏–≤–∞, —á—Ç–æ–∂, –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∏ –ø–æ–ª—É—á–∞–µ–º —Å—É–º–º—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
```typescript
const sumArray = module._sumArray;
const result = sumArray([1, 2, 3, 4, 5], 5);
console.log("–°—É–º–º–∞ –º–∞—Å—Å–∏–≤–∞ —Ä–∞–≤–Ω–∞: ", result);
```

–ó–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é, –ø–æ–ª—É—á–∞–µ–º ... "–°—É–º–º–∞ –º–∞—Å—Å–∏–≤–∞ —Ä–∞–≤–Ω–∞: 0".
–ü–æ—á–µ–º—É –Ω–æ–ª—å, –≤–µ–¥—å –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –º–∞—Å—Å–∏–≤ –∏ –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å 15? 

–ù–∞ –¥–∞–Ω–Ω–æ–µ –≤–æ–∑–º—É—â–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç –ø—Ä–æ—Å—Ç - –º—ã –Ω–µ –º–æ–∂–µ–º (–º–æ–∂–µ–º, –Ω–æ —ç—Ç–æ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∑–∂–µ) –æ—Ç–¥–∞–≤–∞—Ç—å WASM-—Ñ—É–Ω–∫—Ü–∏—è–º —á—Ç–æ-—Ç–æ —Å–ª–æ–∂–Ω–µ–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤.

–¢—É—Ç –∏ –Ω–∞—Å—Ç—É–ø–∞–µ—Ç 99% –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–µ —Å WASM - –ø–µ—Ä–µ–¥–∞—á–∞ —á—Ç–æ-—Ç–æ —Å–ª–æ–∂–Ω–µ–µ –∏–Ω—Ç–µ–≥–µ—Ä–æ–≤.

–ò –æ–¥–Ω–∏–º –∏–∑ –ø—É—Ç–µ–π —Ä–µ—à–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã –±—É–¥–µ—Ç, –±–∞—Ä–∞–±–∞–Ω–Ω–∞—è –¥—Ä–æ–±—å, –∞–¥—Ä–µ—Å–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ üôà.

! –û—á–µ–Ω—å –≤–∞–∂–Ω–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å, –≤ WebAssembly –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 32-—Ä–∞–∑—Ä—è–¥–Ω—É—é –º–æ–¥–µ–ª—å –∞–¥—Ä–µ—Å–∞—Ü–∏–∏, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –∏–Ω–¥–µ–∫—Å—ã –∏–º–µ—é—Ç 32 –±–∏—Ç–∞.

–ú—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥—É–ª—è-–æ–±—ë—Ä—Ç–∫–∏ –≤ –≤–∏–¥–µ "_malloc" –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ WASM –∏ "_free" - –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –æ–Ω–æ–π.
–í –∏—Ç–æ–≥–µ –Ω–∞—à –∫–æ–¥ —Å —à–∞–≥–∞–º–∏ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```typescript
const sumArray = module._sumArray;

// –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ i32;
const vec = new Int32Array([1, 2, 3, 4, 5, 6]);
 
// –í—ã–¥–µ–ª—è–µ–º –ø–æ–¥ —ç—Ç–æ—Ç –º–∞—Å—Å–∏–≤ –ø–∞–º—è—Ç—å –≤ –≤–∏–¥–µ –¥–ª–∏–Ω–Ω–∞ –º–∞—Å—Å–∏–≤–∞ * –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç –∏ –ø–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –µ–≥–æ –Ω–∞—á–∞–ª–æ
const arrayPtr = module._malloc(vec.length * vec.BYTES_PER_ELEMENT);
    
vec.forEach((item, index) => {
   // –î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω—É–∂–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –∫–æ–ø–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ.
     module.setValue(arrayPtr + index * vec.BYTES_PER_ELEMENT, item, 'i32');
})
/**
 * –ò–õ–ò
 * –ï—Å–ª–∏ —Ç–∏–ø –≤—Ö–æ–¥–∏—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã –∫—É—á, —Ç–æ —Ç–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫
 * –≤ –∫—É—á–µ 32 –±–∏—Ç–Ω—ã—Ö —á–∏—Å–µ–ª –Ω–∞–¥–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Å –∏–Ω–¥–µ–∫—Å–∞, –∞ –Ω–µ —Å—Å—ã–ª–∫–∏, –∞ –∏–Ω–¥–µ–∫—Å —ç—Ç–æ —É–∫–∑–∞–∞—Ç–µ–ª—å/(32/8) = (4 –±–∏—Ç–∞)
 *
 * module.HEAP32.set(vec, arrayPtr >> 2);
 *
 * –õ–∏–±–æ –∂–µ –∫–∞–∂–¥—ã–µ 4 –±–∞–π—Ç–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–∞–º—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è 4-—Ö –±–∞–π—Ç–Ω–æ–≥–æ —á–∏—Å–ª–∞, –∫–∞–∫ –¥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
 */

const result = sumArray(arrayPtr, vec.length); // –î–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å 21

// –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –ø–∞–º—è—Ç—å, –µ—Å–ª–∏ –Ω–µ —Å–¥–µ–ª–∞–ª–∏ –≤ –°++
module._free(arrayPtr);

console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏ sumArray:', result);
```
...–ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–¥ –∏ –ø–æ–ª—É—á–∞–µ–º "–°—É–º–º–∞ –º–∞—Å—Å–∏–≤–∞ —Ä–∞–≤–Ω–∞: 21"!

–ü–æ–ª—É—á–∏–ª–æ—Å—å! –¢–µ–ø–µ—Ä—å –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –Ω–µ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤, –Ω—É–∂–Ω–æ —Å–∞–º–∏–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ WASM-–ø–∞–º—è—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –Ω–∞—á–∞–ª–æ —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –º–∞—Å—Å–∏–≤–∞.

# –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞–º—è—Ç—å
–ù–µ –±—É–¥—É –≤–¥–∞–≤–∞—Ç—å—Å—è –≤ Computer Science, –Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—É—é —Å–ø—Ä–∞–≤–∫—É.

JavaScript - —è–∑—ã–∫ —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–∞–º—è—Ç—å—é, —Ç–æ –µ—Å—Ç—å, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ, –Ω–æ –¥–æ –ø—Ä—è–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–∞–º—è—Ç–∏ –º—ã –¥–æ–±—Ä–∞—Ç—å—Å—è –±–µ–∑ —Ä—É—Ç–∫–∏—Ç–æ–≤ –Ω–µ —Å–º–æ–∂–µ–º.
–°–∏ –∏ –°++ - –¥—Ä—É–≥–æ–µ –¥–µ–ª–æ, –∏ –Ω–∞–º, –≤ —Å–∏–ª—É —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å WASM, –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

–í–æ–∑—å–º–µ–º –ø—Ä–∏–º–µ—Ä –∏–∑ sumArray:

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –≤—ã–∑–æ–≤—É —Ñ—É–Ω–∫—Ü–∏–∏, –º—ã –≤—ã–¥–µ–ª–∏–ª–∏ –ø–∞–º—è—Ç—å –ø–æ–¥ 6 —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∑–∞–±–∏–ª–∏ –ø–∞–º—è—Ç—å WASM –Ω–∞—à–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ:
–ö–ê–†–¢–ò–ù–ö–ê 1

–í —ç—Ç–æ–º –Ω–∞–º –∫–∞–∫ —Ä–∞–∑ –∏ –ø–æ–º–æ–≥–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è –º–æ–¥—É–ª—è - _malloc –∏ setValue: –ø–µ—Ä–≤—ã–º –º—ã –≤—ã–¥–µ–ª—è–µ–º –ø–∞–º—è—Ç—å –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç, –∞ –≤—Ç–æ—Ä—ã–º –º—ã –ø–µ—Ä–µ–¥–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∞–¥—Ä–µ—Å—É –≤ –ø–∞–º—è—Ç—å WASM, –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π LLVM-—Ç–∏–ø.
```typescript
// –í—ã–¥–µ–ª—è–µ–º –ø–∞–º—è—Ç—å –Ω–∞ n —á–∏—Å–ª–æ –±–∞–π—Ç
const arrayPtr = module._malloc(vec.length * vec.BYTES_PER_ELEMENT);

// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≤ WASM-–ø–∞–º—è—Ç—å
vec.forEach((item, index) => {
    module.setValue(arrayPtr + index * vec.BYTES_PER_ELEMENT, item, 'i32');
})    
```
–ò–º–µ–Ω–Ω–æ –ø–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ –Ω–∞–º –∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å –ø–µ—Ä–µ–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ —á–µ—Ä–µ–∑ WASM –≤ –°++.

# –ö–∞–∫ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏

–ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å–æ–≤–µ—Ç—É—é –≤ –≤–∏–¥–µ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π - –±—É–¥–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ –ø—Ä–æ–±–ª–µ–º –∏ –∫–æ–¥–∞.

1) –°–Ω–∞—á–∞–ª–∞ –º—ã –≤—ã–¥–µ–ª—è–µ–º –ø–∞–º—è—Ç—å –ø–æ–¥ —Å—Ç—Ä–æ–∫—É –∏ –ø–æ–ª—É—á–∞–µ–º –µ–µ —É–∫–∞–∑–∞—Ç–µ–ª—å.
2) –ü–µ—Ä–µ–¥–∞–µ–º —ç—Ç–æ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∏–ø–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è "*" —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º –≤ 4 –±–∞–π—Ç–∞, —á—Ç–æ —Å–ø–∞—Å—ë—Ç –Ω–∞—Å –æ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∏.

–í—ã–≥–ª—è–¥–µ—Ç—å —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```typescript
/**
 * –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –≤ –ø–∞–º—è—Ç—å WebAssembly
 * @param str —Å—Ç—Ä–æ–∫–∞
 * @param module –º–æ–¥—É–ª—å wasm
 * @return {number} —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏
 */
export function allocateString(str: string, module: ModuleNative): number {
    /**
     * –ö–æ–≥–¥–∞ –º—ã –∫–æ–ø–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É –≤ –ø–∞–º—è—Ç—å WebAssembly —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ module.stringToUTF8, –º—ã –¥–æ–ª–∂–Ω—ã —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω—É–ª–µ–≤–æ–π —Å–∏–º–≤–æ–ª (–Ω—É–ª–µ–≤–æ–π —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä). –ò–Ω–∞—á–µ –º—ã –±—É–¥–µ–º —Ç–µ—Ä—è—Ç—å —á–∞—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤.
     */
    const lengthBytes = (module.lengthBytesUTF8(str) + 1);
    /**
     * –í—ã–¥–µ–ª—è–µ–º –ø–∞–º—è—Ç—å –ø–æ–¥ —Å—Ç—Ä–æ–∫—É
     */
    const stringPtr = module._malloc(lengthBytes);
    /**
     *
     * –§—É–Ω–∫—Ü–∏—è module.stringToUTF8 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –∏–∑ JavaScript –≤ –ø–∞–º—è—Ç—å WebAssembly –≤ —Ñ–æ—Ä–º–∞—Ç–µ UTF-8.
     * –§—É–Ω–∫—Ü–∏—è stringToUTF8 –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è JavaScript-—Å—Ç—Ä–æ–∫–∏ –≤ –ø–∞–º—è—Ç—å WebAssembly –≤ —Ñ–æ—Ä–º–∞—Ç–µ UTF-8.
     */
    module.stringToUTF8(str, stringPtr, lengthBytes);
    return stringPtr;
}
```

–°–Ω–∞—á–∞–ª–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è —Å—Ç—Ä–æ–∫–∏, –Ω–µ –∑–∞–±—ã–≤–∞–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ –Ω—É–ª–µ–≤–æ–π —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä - –∫–æ–Ω–µ—Ü —Å—Ç—Ä–æ–∫–∏, –∏–Ω–∞—á–µ –±—É–¥—É—Ç —Å—Ç—Ä–æ–∫–∏ —Å—ä–µ–∑–∂–∞—Ç—å –≤–ª–µ–≤–æ –Ω–∞ 1 —ç–ª–µ–º–µ–Ω—Ç!
–ó–∞—Ç–µ–º –≤—ã–¥–µ–ª—è–µ–º –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç –∏ –∫–æ–ø–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç—å WASM, –ø–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–æ–∫—É.

# –ö–∞–∫ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ

–¢—É—Ç –≤—Å—ë –ø—Ä–æ—Å—Ç–æ - –æ–¥–∏–Ω –±–∞–π—Ç —Å –Ω—É–ª–µ–º –∏–ª–∏ –µ–¥–∏–Ω–∏—Ü–µ–π:
```typescript
const boolPtr = module._malloc(1);

module.setValue(boolPtr, 0 –∏–ª–∏ 1, 'i8');
```

# –ö–∞–∫ –±—ã—Ç—å —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –º–∞—Å—Å–∏–≤–∞–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤

–í –Ω–∞—à–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏ (–æ–ø—è—Ç—å –∂–µ, –ø—Ä–æ –±–∏–Ω–¥—ã –º—ã –Ω–µ –∑–Ω–∞–µ–º!), –Ω—É–∂–Ω–æ —Å–∞–º–∏–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç—å –∏ —è —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.

1) –°–æ–∑–¥–∞–¥–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –°++
```
EXTERN struct Person {
    const char* name;
    int age;
};
```

–°–∞–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```
Person* getTheOldestPerson(Person* persons, int length) {
    int maxAge = 0;
    int index = 0;
    for (int i = 0; i < length; i++) {
        if ( persons[i].age >= maxAge ) {
            maxAge = persons[i].age;
            index = i;
        }
    }
    return &persons[index];
}
```

–û—á–µ–Ω—å –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—Ç–∞–≤–ª—è—Ç—å –ø–æ–ª—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö, –ø–∞–º—è—Ç—å –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–∞ –∫–∞–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ç—Ä—É–∫—É—Ç—É—Ä—ã.
name - —Å–Ω–∞—á–∞–ª–∞ –∏–¥–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–æ–∫—É –≤ –ø–∞–º—è—Ç–∏ –≤ 4 –±–∞–π—Ç, –ø–æ—Ç–æ–º —É–∂–µ age - 4 –±–∞–π—Ç–∞ —á–∏—Å–ª–∞, –Ω–∏–∫–∞–∫ –∏–Ω–∞—á–µ!

–ú—ã —Ö–æ—Ç–∏–º –ø–µ—Ä–µ–¥–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏—é –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤: 
```typescript
[
    { name: 'Alice', age: 30 },
    { name: 'Bob', age: 25 },
    { name: 'Charlie', age: 35 },
    { name: 'Shakira', age: 20 }
]
```

–î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1) –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏–º –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –ø–∞–º—è—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º —Ç—É–¥–∞ –µ—ë –∫–æ–ø–∏—é —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ allocateString
2) –°—á–∏—Ç–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–∂–Ω—ã—Ö –±–∞–π—Ç–æ–≤ –¥–ª—è –º–∞—Å—Å–∏–≤–∞.
4 —É–∫–∞–∑–∞—Ç–µ–ª—è –ø–æ 4 –±–∞–π—Ç–∞ –∏ 4 int32 –ø–æ 4 –±–∞–π—Ç–∞ = 4*(8) = 32 –±–∞–π—Ç –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞ —ç—Ç–æ—Ç –º–∞—Å—Å–∏–≤.
3) –í—ã–¥–µ–ª—è–µ–º –ø–∞–º—è—Ç—å –∏ –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–±–∏–≤–∞—Ç—å –µ–µ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.
–ù–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ–º —Ç–∞–∫–æ–π JavaScript-–∫–æ–¥:
```typescript
// –°–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
const people: People[] = [
    { name: 'Alice', age: 30 },
    { name: 'Bob', age: 45 },
    { name: 'Charlie', age: 35 },
    { name: 'Shakira', age: 20 }
];


// –í—ã–¥–µ–ª–∏—Ç—å –ø–∞–º—è—Ç—å –¥–ª—è –º–∞—Å—Å–∏–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ
const personSize = 8; // –†–∞–∑–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Person –≤ –±–∞–π—Ç–∞—Ö (2 –ø–æ–ª—è: name (4 –±–∞–π—Ç–∞) –∏ age (4 –±–∞–π—Ç–∞))
const arrayPtr1 = module._malloc(people.length * personSize);

/**
 * –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ - –¥–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä—Å–æ–Ω—ã) –º—ã –∫–æ–ø–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ JavaScript –≤ –ø–∞–º—è—Ç—å WebAssembly.
 */
people.forEach((person, index) => {
    const namePtr = allocateString(person.name, module);
    module.setValue(arrayPtr1 + index * personSize, namePtr, '*'); // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∏–º—è
    module.setValue(arrayPtr1 + index * personSize + 4, person.age, 'i32'); // –ó–Ω–∞—á–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞
});
```
–í –∏—Ç–æ–≥–µ, –º—ã –∑–∞–ø–æ–ª–Ω–∏–º –ø–∞–º—è—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
–ö–ê–†–¢–ò–ù–ö–ê 2

–í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–æ–ª—É—á–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –æ–±—ä–µ–∫—Ç, —Ä–∞–∑–±–∏—Ä–∞–µ–º –µ–≥–æ: 
```typescript
 const resultPtr = getTheOldestPerson(arrayPtr1, people.length);
// –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–æ–∫—É –∏–∑ –ø–∞–º—è—Ç–∏
const namePtr = module.getValue(resultPtr, '*');
// –ü–æ–ª—É—á–∞–µ–º —Å—Ç—Ä–æ–∫—É –∏–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è –∏–º–µ–Ω–∏
const name = module.UTF8ToString(namePtr);
// –ü–æ–ª—É—á–∞–µ–º –≤–æ–∑—Ä–∞—Å—Ç –∏–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ + 4 –∏–∑-–∑–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ –∏–º—è
const age = module.getValue(resultPtr + 4, 'i32');

const theOldestPerson: People = {
    name,
    age
}

// –û—Å–≤–æ–±–æ–¥–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –ø–∞–º—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
module._free(resultPtr);
module._free(namePtr);

console.log('–°–∞–º—ã–π —Å—Ç–∞—Ä—ã–π —á–µ–ª–æ–≤–µ–∫: ', theOldestPerson);
```

–ü–æ–ª—É—á–∞–µ–º –Ω–∞ –≤—ã—Ö–æ–¥–µ: "–°–∞–º—ã–π —Å—Ç–∞—Ä—ã–π —á–µ–ª–æ–≤–µ–∫: { name: 'Charlie', age: 35 }", –æ—Ç–ª–∏—á–Ω–æ.

# –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∏–Ω–¥—ã (Emscripten bindings)?
–ê –µ—Å–ª–∏ —è –≤–∞–º —Å–∫–∞–∂—É, —á—Ç–æ –º—ã –º–æ–∂–µ–º —É–±—Ä–∞—Ç—å –≤—Å—é —ç—Ç—É —Ç–µ–º—É —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑ –Ω–µ–µ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–π?
–ß—Ç–æ –º–æ–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–∞ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º?

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è.

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π
Emscripten –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±—ë—Ä—Ç–æ–∫ –Ω–∞–¥ –°++ –∫–æ–¥–æ–º, –≤—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ —Ç–∞–∫
```
EMSCRIPTEN_BINDINGS(my_module) {
    emscripten::function("myFunction", &myFunction);
}
```

–¢–µ–ø–µ—Ä—å –º—ã —Å–º–æ–∂–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ "_", –∏ —Å–æ–∑–¥–∞–¥–∏–º –æ–±—ë—Ä—Ç–∫—É —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç Emscripten.
```module.myFunction(...)``` - –≤–æ—Ç —Ç–∞–∫–æ–π –≤—ã–∑–æ–≤ —É –Ω–∞—Å –±—É–¥–µ—Ç –∏–∑ JavaScript-–∫–æ–¥–∞.

–ß—Ç–æ –∂–µ –¥–æ –≤–µ–∫—Ç–æ—Ä–æ–≤? - –í—Å—ë –ø—Ä–æ—Å—Ç–æ, –¥–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä:
```... myFunction(std::vector<int> &vec) {...}``` - –ú—ã –Ω–µ —Å–º–æ–∂–µ–º –¥–∞–∂–µ –∏—Å–ø–æ–ª—å–∑—É—è –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –ø–∞–º—è—Ç–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä, —Ç–∞–∫ —á—Ç–æ –Ω—É–∂–Ω–æ —Ç–æ–∂–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–∏–Ω–¥–∞–º–∏:
```
EMSCRIPTEN_BINDINGS(my_module) {
    emscripten::function("myFunction", &myFunction);
    emscripten::register_vector<std::vector<int>>('MyVector');
}
```
–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä —Å –Ω–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –°++ —Ñ—É–Ω–∫—Ü–∏—é:
```typescript
const vector = new module.MyVector();
vector.push_back(1);
vector.push_back(2);
vector.push_back(3);

module.MyFunction(vector);
```
–ú—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –°++ –∫–æ–¥ –µ–≥–æ –ø–æ–ª—É—á–∏—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç.

–ê –∫–∞–∫ –∂–µ –Ω–∞–º –±—ã—Ç—å, –µ—Å–ª–∏ –Ω–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –∏ –º—ã —Ö–æ—Ç–∏–º –µ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–ª—É—á–∏—Ç—å? 
- –í—Å—ë –µ—â–µ –ø—Ä–æ—â–µ:
```typescript
// –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é zet
    const resultVector = module.MyFunction(vector);

    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–∞—Å—Å–∏–≤ JavaScript
    const outputArray = [];
    for (let i = 0; i < resultVector.size(); i++) {
        outputArray.push(resultVector.get(i));
    }

    // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
    vector.delete();
    resultVector.delete();

    // –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    console.log(outputArray);
```
–î–∞–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–æ–±–ª–µ–º —Å –Ω–µ–π –Ω–µ –¥–æ–ª–∂–Ω–æ –≤–æ–∑–Ω–∏–∫–∞—Ç—å.

# –§–∏–Ω–∞–ª. –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–¥–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Emscripten bindings

–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –º—ã –≤–æ—Ç –≤–æ–æ–±—â–µ —Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å –Ω–∞—à—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–¥–æ–±–Ω–æ? - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å emscripten::val!

–§—É–Ω–∫—Ü–∏—è –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞:
```
    EXTERN struct User {
        std::string id;
        std::string name;
        bool isSuperUser;
    };

    EXTERN EMSCRIPTEN_KEEPALIVE
    emscripten::val createUsers(emscripten::val userArray) {
        std::vector<User> result;
        const int length = userArray["length"].as<int>();
        for (int i = 0; i < length; i++) {
            User newUser;
            const std::string uuid = generateUUID();
            newUser.id = uuid;
            newUser.name = userArray[i]["name"].as<std::string>();
            newUser.isSuperUser = userArray[i]["isSuperUser"].as<bool>();
            result.push_back(newUser); // –°–æ–∑–¥–∞–Ω–∏–µ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω–µ—Ü –≤–µ–∫—Ç–æ—Ä–∞
        }
        return emscripten::val::array(result);
    }
```
–û—á–µ–Ω—å —É–¥–æ–±–Ω–æ, –º—ã –º–æ–∂–µ–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø—Ä—è–º–æ –∫–∞–∫ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ JavaScript.


–°–æ–±–∏—Ä–∞–µ–º —Å —Ñ–ª–∞–≥–æ–º --bind –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤ –º–æ–¥—É–ª–µ:
```typescript
const users: User[] = [
    {name: 'Oleg', isSuperUser: false},
    {name: 'Rurik', isSuperUser: true},
    {name: 'Alexander', isSuperUser: false}
];

const result = module.createUsers(users);
console.log('–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:', result);
```
–ó–∞–ø—É—Å–∫–∞–µ–º, –ø–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫—É –æ—Ç WASM, —á—Ç–æ –Ω–µ—Ç –∫–∞–∫–æ–≥–æ-—Ç–æ 4User.
–°–º—ã—Å–ª –≤ —Ç–æ–º, —á—Ç–æ –º–æ–¥—É–ª—é-–æ–±—ë—Ä—Ç–∫–µ –Ω—É–∂–Ω–æ –ø–æ–º–æ—á—å —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –∞–≥—Ä—É–º–µ–Ω—Ç–∞—Ö.
–í—ã–≥–ª—è–¥–µ—Ç—å —ç—Ç–æ –±—É–¥–µ—Ç —Ç–∞–∫:
```
EMSCRIPTEN_BINDINGS(my_module) {
    emscripten::function("createUsers", &createUsers);
    emscripten::value_object<User>("User")
        .field("id", &User::id)
        .field("name", &User::name)
        .field("isSuperUser", &User::isSuperUser)
    ;
}
```
–ó–∞–ø—É—Å–∫–∞–µ–º... –ø–æ–ª—É—á–∞–µ–º —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```typescript
–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: [
  {
    id: 'a2aed6b1-253e-4e7d-b9bd-6e85f6c94eaf',
    name: 'Oleg',
    isSuperUser: false
  },
  {
    id: 'a581238c-35ba-4183-bdda-7cb3355bcd1a',
    name: 'Rurik',
    isSuperUser: true
  },
  {
    id: 'fc1c3736-30da-4630-a24d-b33076c6471f',
    name: 'Alexander',
    isSuperUser: false
  }
]
```
–ò, –∫–∞–∫ –≤—ã –º–æ–≥–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å, –º—ã –≤–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–ª–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π –¥–ª—è JavaScript —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å—Ä–∞–∑—É –ø–æ—è–≤–∏–ª—Å—è –ø—Ä–∏–µ–º–ª–∏–µ–º—ã–π –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤.

–≠—Ç–æ—Ç —Ñ–∞–∫—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–Ω–¥–æ–≤ Emscripten –¥–µ–ª–∞–µ—Ç –∂–∏–∑–Ω—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ —Å–æ—Ç–Ω–∏ —Ä–∞–∑ –ø—Ä–æ—â–µ, –Ω–µ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–¥–æ–≤–∞—Ç—å, –Ω–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ø—Ä–∏–¥–µ—Ç—Å—è –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ val, –Ω–æ —ç—Ç–æ —É–∂–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä.

# –î–æ—Å—Ç—É–ø –∫ JavaScript –∏–∑ –°++
Emscripten —Ç–∞–∫ –∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≥–ª–æ–±–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º JavaScript –≤–Ω—É—Ç—Ä–∏ –°++ —á–µ—Ä–µ–∑ ```emscripten::val::global("–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è");```.

–ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—É—á–∏–º –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤—ã–≤–µ–¥–µ–º —Ç–∞–º –º–∞—Å—Å–∏–≤ –∏–∑ –Ω–∞—à–µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º —Ç—É —Ñ—É–Ω–∫—Ü–∏—é —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É:
```emscripten::val::global("console").call<void>("log", userArray);```
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ JavaScript, —É –Ω–∞—Å –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è:
```typescript
[
  { name: 'Oleg', isSuperUser: false },
  { name: 'Rurik', isSuperUser: true },
  { name: 'Alexander', isSuperUser: false }
]
```
–¢–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ document –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ –∫–∞–∫ —Ä–∞–∑ –∫—Å—Ç–∞—Ç–∏, –¥–∞ –∏ –∫ –ª—é–±–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.


# –í—ã–≤–æ–¥
–ù–∞–¥–µ—é—Å—å, —á—Ç–æ –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ —è –ø–æ–º–æ–≥ –≤–∞–º –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –Ω–∞–ª–∞–¥–∏—Ç—å –æ–±—â–µ–Ω–∏–µ –º–µ–∂–¥—É –°++ –∏ JavaScript —á–µ—Ä–µ–∑ WASM.
–ú—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ –ø–∞–º—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –ø–æ–ª—É—á–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–∞–º—è—Ç–∏.
–£–∑–Ω–∞–ª–∏ –ø—Ä–æ –±–∏–Ω–¥—ã Emscripten, –∫–æ—Ç–æ—Ä—ã–π –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ —É–ø—Ä–æ—â–∞—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.

–ë–ª–∞–≥–æ–¥–∞—Ä—é –≤—Å–µ—Ö –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ, –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –∏ —Ä–∞–±–æ—Ç–∞ —Å WASM –±—É–¥–µ—Ç –º–µ–Ω–µ–µ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ–π.
–ö–æ–¥ –¥–ª—è –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏ –∏ –¥–æ–∫–µ—Ä—Ñ–∞–π–ª —Å –±–∏–ª–¥–æ–º C++ –∏ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–∏–º–µ—Ä–æ–≤ –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞—á–∞—Ç—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å <a href="https://github.com/avangardio/wasm">–∑–¥–µ—Å—å</a>. 
